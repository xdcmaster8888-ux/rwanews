# Note.com 自動ログインシステム - 使用ガイド

## 📌 概要

このシステムは以下の流れで自動投稿を実現します：

### 流れ：
1. **初回のみ** - ブラウザで手動ログイン → セッション保存
2. **2回目以降** - 保存されたセッションを自動復元 → 自動投稿

---

## 🔑 仕組み

### セッション保存（初回）
```
Note.com ログイン → セッション情報をファイルに保存
                   ↓
            output/note_sessions/auth_context.json
```

### セッション復元（2回目以降）
```
保存されたセッションをロード → ブラウザに復元 → 自動ログイン
                                            ↓
                                        記事自動投稿
```

---

## 📋 使用方法

### ステップ 1: セッション保存（初回）

```bash
python auto_login_system.py
```

**実行内容：**
- ブラウザが起動します
- **ブラウザで Note.com にログインしてください**
- システムがログイン完了を自動検出
- セッション情報をファイルに保存

**出力：**
```
✅ セッション保存完了
   次回からは自動ログインが機能します
```

### ステップ 2: セッション復元確認

```bash
python auto_login_system.py
```

**実行内容：**
- 保存されたセッションから自動ログイン
- Note.com が自動的に開きます
- ログイン状態が確認されます

**出力：**
```
✅ セッション復元成功 - 自動ログイン可能！
```

---

## 🚀 自動投稿への統合

セッションが保存されたら、以下で自動投稿を実行：

```bash
python main.py
```

**流れ：**
1. 保存されたセッションを復元
2. 記事を自動生成
3. Note.com に自動投稿

---

## ⚠️ 注意事項

### セッション無効化時
- Note.com のログイン情報を変更した場合
- ブラウザキャッシュをクリアした場合
- 30日以上セッションを使用しなかった場合

**対処方法：**
```bash
rm output/note_sessions/auth_context.json
python auto_login_system.py
```

再度手動ログインしてセッションを更新します。

---

## 📁 ファイル構成

```
rwanews/
├── auto_login_system.py           # セッション保存・復元スクリプト
├── main.py                         # 記事生成・投稿スクリプト
└── output/
    └── note_sessions/
        └── auth_context.json       # 保存されたセッション情報
```

---

## 🔒 セキュリティ

- `auth_context.json` には認証クッキーが保存されます
- **このファイルは共有しないでください**
- `.gitignore` に追加推奨：
  ```
  output/note_sessions/
  ```

---

## 🐛 トラブルシューティング

### Q: セッション復元が失敗する
A: 以下を確認してください：
- `output/note_sessions/auth_context.json` が存在するか
- Note.com の仕様変更がないか
- 再度ログインしてセッションを更新してください

### Q: ログインできない
A: Note.com がログインを制限している可能性があります：
- 1日待機してから再度試してください
- パスワードが正確か確認してください

### Q: 記事が投稿されない
A: セッションは有効でも、投稿処理が失敗している可能性があります：
- ブラウザで手動投稿して動作確認
- セレクターが変更されていないか確認

---

## ✅ 完全自動化の実現

セッション保存が完了したら、以下のコマンドで **完全自動化** が可能です：

```bash
python main.py
```

- 記事生成：自動
- ログイン：自動（セッション復元）
- 投稿：自動
- スケジュール実行：Windows Task Scheduler で定時実行

---

**初回セットアップが完了すれば、あとは完全に自動化できます！**
